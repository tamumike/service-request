<div class="container-fluid d-flex mb-3">
  <button class="btn btn-primary" [routerLink]="['/request-detail/', request.requestID]">Go Back</button>
</div>

<div class="container ReviewRequest">

  <h1 class="request-review-header">Service Request # {{ request.requestID }}</h1>
  <h2 class="request-review-subheader">{{ request.title }}</h2>

  <div class="container request-review-container-box">
    <div class="container d-flex p-0 request-review-box">
      <div class="flex-fill request-review-field">Created By:</div>
      <div class="flex-fill request-review-value">{{ request.createdBy }}</div>
    </div>

    <div class="container d-flex p-0 request-review-box">
      <div class="flex-fill request-review-field">Created Date:</div>
      <div class="flex-fill request-review-value">{{ request.createdDate | date }}</div>
    </div>

    <div class="container d-flex p-0 request-review-box">
      <div class="flex-fill request-review-field">Request Date:</div>
      <div class="flex-fill request-review-value">{{ request.requestDate | date}}</div>
    </div>

    <div class="container d-flex p-0 request-review-box">
      <div class="flex-fill request-review-field">Location:</div>
      <div class="flex-fill request-review-value">{{ request.location }}</div>
    </div>

    <div class="container d-flex p-0 request-review-box">
      <div class="flex-fill request-review-field">Description:</div>
      <div class="flex-fill request-review-value">{{ request.description }}</div>
    </div>

    <div class="container d-flex p-0 request-review-box">
      <div class="flex-fill request-review-field">Deliverables:</div>
      <div class="flex-fill request-review-value">{{ request.deliverables }}</div>
    </div>

    <div class="container d-flex p-0 request-review-box">
      <div class="flex-fill request-review-field">Status:</div>
      <div class="flex-fill request-review-value">{{ request.status }}</div>
    </div>
  </div>


  <div class="container request-review-container-box mt-3">
    <form [formGroup]="reviewRequestForm" (ngSubmit)="submitRequestReview()">

      <div class="form-group">
        <label class="request-review-field" for="afe">AFE:</label>
        <input type="text"
        class="form-control"
        formControlName="afe"
        [ngClass]="{'is-invalid': reviewRequestForm.get('afe').errors && reviewRequestForm.get('afe').touched}">
        <div class="invalid-feedback">Please provide the AFE number.</div>
      </div>

      <div class="form-group">
        <label class="request-review-field" for="engineerAssigned">Assigned Engineer:</label>
        <select
        formControlName="engineerAssigned"
        class="form-control"
        [ngClass]="{'is-invalid': reviewRequestForm.get('engineerAssigned').errors && reviewRequestForm.get('engineerAssigned').touched}">
        <option *ngFor="let member of groupMembers" value="{{ member.username }}">{{ member.fullName }}</option>
        </select>
        <div class="invalid-feedback">Please assign an engineer to the request.</div>
      </div>

      <div class="form-group">
        <label class="request-review-field" for="coupaDate">Coupa Approved Date:</label>
        <input type="text"
        autocomplete="off"
        formControlName="coupaDate"
        class="form-control"
        bsDatepicker
        [ngClass]="{'is-invalid': reviewRequestForm.get('coupaDate').errors && reviewRequestForm.get('coupaDate').touched}"
        [bsConfig]="{ dateInputFormat: 'YYYY-MM-DD', containerClass: 'theme-default', adaptivePosition: true, isAnimated: false }">
        <div class="invalid-feedback">Date is invalid.</div>
      </div>

      <div class="form-group form-check form-check-inline d-flex align-items-center">
        <input type="checkbox" class="form-check-input form-control request-checkbox" formControlName="approved">
        <label class="request-review-field" for="approved">Approved </label>
      </div>

      <div class="form-group d-flex justify-content-end">
        <button class="btn btn-success" type="submit">Submit</button>
      </div>

    </form>
  </div>
</div>

  <div class="container-fluid w-75">
    <app-comment-list [CommentsFromRequest]="request.comments"></app-comment-list>
    <app-comment-create [requestID]="request.requestID" (commentSubmitted)="refreshComments($event)"></app-comment-create>
  </div>



